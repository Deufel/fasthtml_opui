

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Components

> This is the componenet helper functions ‚Ä¶ WIP

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L15"
target="_blank" style="float:right; font-size:smaller">source</a>

### OpenPropsLink

>  OpenPropsLink ()

*Generates a <link> tag for the Open Props CSS stylesheet. Usage:
Include this in the Head() of your FastHTML page.*

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L25"
target="_blank" style="float:right; font-size:smaller">source</a>

### Button

>  Button (*c, size=None, variant='outlined', cls=None, **kwargs)

``` python
Button("Click me", size="small", variant="filled")
```

``` html
<button class="button small filled">Click me</button>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L37"
target="_blank" style="float:right; font-size:smaller">source</a>

### IconButton

>  IconButton (*c, size='small', **kwargs)

\*Generates an <button> for icons with Open Props UI styling.

Args: \*c: Children (e.g., icon elements). size: Size (‚Äòsmall‚Äô by
default). \*\*kwargs: Additional HTML attributes.

Returns: FastHTML Button component with appropriate classes.\*

``` python
IconButton("üîç", size="small")
```

``` html
<button class="button outlined icon-button small">üîç</button>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L55"
target="_blank" style="float:right; font-size:smaller">source</a>

### ToggleButtonGroup

>  ToggleButtonGroup (*buttons, dynamic=False, size=None, **kwargs)

\*Generates a

<div>

containing toggle buttons with Open Props UI styling.

Args: \*buttons: Button components to include in the group. dynamic:
Whether the group is dynamic (adds ‚Äòdynamic‚Äô class). size: Optional size
(‚Äòsmall‚Äô, ‚Äòx-small‚Äô). \*\*kwargs: Additional HTML attributes.

Returns: FastHTML Div component with appropriate classes and children.\*

``` python
ToggleButtonGroup(
    Button("Option 1", variant="tonal"),
    Button("Option 2", variant="tonal"),
    dynamic=True,
    size="small"
)
```

``` html
<div class="toggle-button-group dynamic small">
<button class="button tonal">Option 1</button><button class="button tonal">Option 2</button></div>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L76"
target="_blank" style="float:right; font-size:smaller">source</a>

### Card

>  Card (*c, variant='text', cls=None, **kwargs)

\*Generates a

<div>

for cards with Open Props UI styling.

Args: \*c: Children (e.g., Hgroup, Div(cls=‚Äúcontent‚Äù),
Div(cls=‚Äúactions‚Äù)). variant: Variant (‚Äòtext‚Äô, ‚Äòoutlined‚Äô, ‚Äòtonal‚Äô,
‚Äòelevated‚Äô). Defaults to ‚Äòtext‚Äô. cls: Additional classes to add to the
card. \*\*kwargs: Additional HTML attributes.

Returns: FastHTML Div component with appropriate classes and children.\*

``` python
c = Card(
    Hgroup(
        P("Overline"),
        H2("Headline", cls="h3"),
        P("Subhead")
    ),
    Div("Explain more about the topic shown in the headline and subhead through supporting text.", cls="content"),
    Div(
        Button("Share"),
        Button("Learn more"),
        cls="actions"
    ),
    variant="outlined"
)

print(c)
show(c)
```

    div((hgroup((p(('Overline',),{}), h2(('Headline',),{'class': 'h3'}), p(('Subhead',),{})),{}), div(('Explain more about the topic shown in the headline and subhead through supporting text.',),{'class': 'content'}), div((button(('Share',),{'class': 'button outlined'}), button(('Learn more',),{'class': 'button outlined'})),{'class': 'actions'})),{'class': 'card outlined'})

<div class="card outlined">
<hgroup>    <p>Overline</p>
    <h2 class="h3">Headline</h2>
    <p>Subhead</p>
</hgroup>  <div class="content">Explain more about the topic shown in the headline and subhead through supporting text.</div>
  <div class="actions">
<button class="button outlined">Share</button><button class="button outlined">Learn more</button>  </div>
</div>

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L103"
target="_blank" style="float:right; font-size:smaller">source</a>

### Checkbox

>  Checkbox (*c, label=None, size=None, stack=False, error=False, cls=None,
>                **kwargs)

``` python
show(Checkbox(label="Accept terms", size="small", error=True))
```

<label class="checkbox small error">  <input type="checkbox">
<span class="label">Accept terms</span></label>

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L122"
target="_blank" style="float:right; font-size:smaller">source</a>

### FieldGroup

>  FieldGroup (*c, direction='column', disabled=False, error=False,
>                  legend=None, **kwargs)

\*Generates a
<fieldset>

for grouping fields with Open Props UI styling.

Args: \*c: Children (e.g., form fields). direction: Layout direction
(‚Äòcolumn‚Äô or ‚Äòrow‚Äô). disabled: Whether the fieldset is disabled. error:
Whether to show error state (adds ‚Äòerror‚Äô class). legend: Optional
legend text. \*\*kwargs: Additional HTML attributes.

Returns: FastHTML Fieldset component with appropriate classes and
children.\*

``` python
FieldGroup(
    Checkbox(label="Option 1"),
    Checkbox(label="Option 2"),
    legend="Choices",
    direction="row"
)
```

``` html
<fieldset class="field-group row"><legend>Choices</legend><label class="checkbox">    <input type="checkbox">
<span class="label">Option 1</span></label><label class="checkbox">    <input type="checkbox">
<span class="label">Option 2</span></label></fieldset>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L149"
target="_blank" style="float:right; font-size:smaller">source</a>

### Field

>  Field (*c, size=None, variant='outlined', error=False, autofit=False,
>             **kwargs)

\*Generates a

<div>

container for form fields with Open Props UI styling.

Args: \*c: Children (e.g., Label, Select/Input, supporting text). size:
Optional size (‚Äòsmall‚Äô). variant: Variant (‚Äòoutlined‚Äô or ‚Äòfilled‚Äô).
error: Whether to show error state (adds ‚Äòerror‚Äô class). autofit:
Whether to enable auto-fit (adds ‚Äòauto-fit‚Äô class). \*\*kwargs:
Additional HTML attributes.

Returns: FastHTML Div component with appropriate classes and children.\*

``` python
Field(
    Label("Select an option"),
    Select(Option("One"), Option("Two")),
    Div("Supporting text", cls="supporting-text"),
    variant="filled"
)
```

``` html
<div class="field filled">
<label>Select an option</label><select><option>One</option><option>Two</option></select>  <div class="supporting-text">Supporting text</div>
</div>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L176"
target="_blank" style="float:right; font-size:smaller">source</a>

### Select

>  Select (*options, size=None, variant='outlined', error=False,
>              autofit=False, **kwargs)

\*Generates a <select> field with Open Props UI styling.

Args: \*options: Option components. size: Optional size (‚Äòsmall‚Äô).
variant: Variant (‚Äòoutlined‚Äô or ‚Äòfilled‚Äô). error: Whether to show error
state. autofit: Whether to enable auto-fit. \*\*kwargs: Additional HTML
attributes for the select.

Returns: FastHTML Field component wrapping the Select.\*

``` python
Select(
    Option("One", value="1"),
    Option("Two", value="2"),
    variant="filled"
)
```

``` html
<div class="field filled">
<select><option value="1">One</option><option value="2">Two</option></select></div>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L195"
target="_blank" style="float:right; font-size:smaller">source</a>

### Accordion

>  Accordion (summary, *content, variant='text', **kwargs)

\*Generates a
<details>

element for accordion with Open Props UI styling.

Args: summary: Summary text or element. \*content: Content inside the
accordion. variant: Variant (‚Äòtext‚Äô by default). \*\*kwargs: Additional
HTML attributes.

Returns: FastHTML Details component with appropriate classes and
children.\*

``` python
Accordion("Details", P("More info"), variant="text")
```

``` html
<details class="accordion text"><summary>Details</summary>  <div class="content">
    <p>More info</p>
  </div>
</details>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L235"
target="_blank" style="float:right; font-size:smaller">source</a>

### AvatarGroup

>  AvatarGroup (*avatars, spacing=None, cls=None, **kwargs)

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L217"
target="_blank" style="float:right; font-size:smaller">source</a>

### Avatar

>  Avatar (*c, variant=None, cls=None, **kwargs)

``` python
AvatarGroup(
    Avatar("user1.jpg", alt="User 1", variant="rounded"),
    Avatar("user2.jpg", alt="User 2", variant="rounded"),
    spacing="gap-small"
)
```

``` html
<div class="avatar-group gap-small">
  <div alt="User 1" class="avatar rounded">user1.jpg</div>
  <div alt="User 2" class="avatar rounded">user2.jpg</div>
</div>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L254"
target="_blank" style="float:right; font-size:smaller">source</a>

### Badge

>  Badge (*c, label, variant=None, color=None, invisible=False,
>             alignment='start-end', cls=None, **kwargs)

\*Creates a badge component based on Open Props UI guidelines.

Args: \*c: Optional children (e.g., an icon or SVG). label (str): The
content to display in the badge (via aria-label). variant (str,
optional): The variant, either None (default) or ‚Äòdot‚Äô. color (str,
optional): The color, one of ‚Äòerror‚Äô, ‚Äòok‚Äô, ‚Äògood‚Äô, or ‚Äòwarning‚Äô.
invisible (bool, optional): Whether the badge is invisible. Defaults to
False. alignment (str, optional): The alignment position, one of
‚Äòstart-start‚Äô, ‚Äòstart-end‚Äô, ‚Äòend-start‚Äô, or ‚Äòend-end‚Äô. Defaults to
‚Äòstart-end‚Äô. cls (str, optional): Additional custom classes to append.
\*\*kwargs: Additional HTML attributes to pass to the span element.

Returns: Span: A FastHTML Span component representing the badge.\*

``` python
Badge(label="New", color="good", variant="dot")
```

``` html
<span aria-label="New" class="badge dot good start-end"></span>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L302"
target="_blank" style="float:right; font-size:smaller">source</a>

### Chip

>  Chip (*c, tag='div', size=None, variant='tonal', **kwargs)

\*Generates a chip component with Open Props UI styling.

Args: \*c: Children (e.g., chip text). tag: Base tag (‚Äòdiv‚Äô, ‚Äòa‚Äô, or
‚Äòbutton‚Äô). size: Optional size (‚Äòsmall‚Äô, ‚Äòmultiline‚Äô). variant: Variant
(‚Äòtonal‚Äô by default). \*\*kwargs: Additional HTML attributes.

Returns: FastHTML component (Div, A, or Button) with appropriate
classes.\*

``` python
Chip("Tag", tag="a", href="#", variant="tonal")
```

``` html
<a href="#" class="chip tonal">Tag</a>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L329"
target="_blank" style="float:right; font-size:smaller">source</a>

### Alert

>  Alert (*c, severity='neutral', variant='tonal', **kwargs)

\*Generates a

<div>

for alerts with Open Props UI styling.

Args: \*c: Children (e.g., alert message). severity: Severity class
(‚Äòneutral‚Äô by default). variant: Variant (‚Äòtonal‚Äô by default).
\*\*kwargs: Additional HTML attributes.

Returns: FastHTML Div component with appropriate classes and role.\*

``` python
Alert("Warning!", severity="warning", variant="tonal")
```

``` html
<div role="alert" class="alert warning tonal">Warning!</div>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L346"
target="_blank" style="float:right; font-size:smaller">source</a>

### Snackbar

>  Snackbar (*c, position='bottom-left', absolute=False, visible=False,
>                **kwargs)

\*Generates a

<div>

for snackbars with Open Props UI styling.

Args: \*c: Children (e.g., snackbar message). position: Position class
(‚Äòbottom-left‚Äô by default). absolute: Whether to use absolute
positioning (adds ‚Äòabsolute‚Äô class). visible: Whether the snackbar is
visible (adds ‚Äòvisible‚Äô class). \*\*kwargs: Additional HTML attributes.

Returns: FastHTML Div component with appropriate classes and role.\*

``` python
Snackbar("Saved", position="bottom-left", visible=True)
```

``` html
<div role="status" class="snackbar bottom-left visible">Saved</div>
```

------------------------------------------------------------------------

<a
href="https://github.com/Deufel/fasthtml_opui/blob/master/fasthtml_opui/components.py#L368"
target="_blank" style="float:right; font-size:smaller">source</a>

### Tabs

>  Tabs (tabs, variant='underlined', panels=None, cls=None, **kwargs)

\*Creates a tab navigation component based on Open Props UI guidelines.

Args: tabs (list): List of tuples \[(label, id, selected), ‚Ä¶\] where: -
label: str or FT component for the tab button content - id: str, unique
identifier for the tab - selected: bool, whether the tab is initially
selected variant (str, optional): The variant, either ‚Äòunderlined‚Äô
(default) or ‚Äòfilled‚Äô. panels (list, optional): List of tuples
\[(content, id), ‚Ä¶\] for tab panels. If None, only tab buttons are
rendered. cls (str, optional): Additional custom classes to append to
the nav element. \*\*kwargs: Additional HTML attributes to pass to the
nav element.

Returns: Nav: A FastHTML Nav component representing the tabs, optionally
with panels.\*

``` python
tabs = [
    ("Profile", "tab-1", True),
    ("Settings", "tab-2", False),
    ("Notifications", "tab-3", False)
]
Tabs(tabs, variant="underlined")
```

``` html
<nav class="tabs underlined">
  <div role="tablist" aria-label="Underlined tabs">
<button role="tab" aria-selected="true" tabindex="0" id="tab-1" class="selected" name="tab-1">Profile</button><button role="tab" aria-selected="false" tabindex="-1" id="tab-2" name="tab-2">Settings</button><button role="tab" aria-selected="false" tabindex="-1" id="tab-3" name="tab-3">Notifications</button>  </div>
</nav>
```

``` python
tabs = [
    ("Korg", "tab-1", True),
    ("Yamaha", "tab-2", False),
    ("Roland", "tab-3", False)
]
panels = [
    (P("Korg content"), "tab-1"),
    (P("Yamaha content"), "tab-2"),
    (P("Roland content"), "tab-3")
]
Tabs(tabs, variant="filled", panels=panels)
```

``` html
<nav class="tabs filled">
  <div role="tablist" aria-label="Filled tabs">
<button role="tab" aria-controls="tab-1-panel" aria-selected="true" tabindex="0" id="tab-1" class="selected" name="tab-1">Korg</button><button role="tab" aria-controls="tab-2-panel" aria-selected="false" tabindex="-1" id="tab-2" name="tab-2">Yamaha</button><button role="tab" aria-controls="tab-3-panel" aria-selected="false" tabindex="-1" id="tab-3" name="tab-3">Roland</button>  </div>
  <div role="tabpanel" aria-labelledby="tab-1" id="tab-1-panel">
    <p>Korg content</p>
  </div>
  <div role="tabpanel" aria-labelledby="tab-2" hidden id="tab-2-panel">
    <p>Yamaha content</p>
  </div>
  <div role="tabpanel" aria-labelledby="tab-3" hidden id="tab-3-panel">
    <p>Roland content</p>
  </div>
</nav>
```

## Testing temporary

``` python
from fasthtml.jupyter import JupyUvi, HTMX
```

``` python
# Add HighlightJS to your headers
app, rt = fast_app(
    exts='head-support',
    pico=False,
    hdrs=(
        Link(rel='stylesheet', href='https://deufel.github.io/css/css/main.css'),

        
        # Add HighlightJS with CSS support
        HighlightJS(langs=['css']),
        # Add Tokyo Night theme
        Link(rel='stylesheet',
             href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/tokyo-night-dark.min.css')
    )
)
```

``` python
@rt("/")
def index():
    return Titled("Open Props UI Test Page",
        Div(
            H2("Button Components"),
            Button("Default Button"),
            Button("Small Button", size="small"),
            Button("Large Button", size="large"),
            Button("Outlined Button", variant="elevated"),
            H2("Tabs"),
            Tabs(tabs, variant="underlined"),
            Tabs(tabs, variant="filled", panels=panels),
            H2("Input Components"),
            Checkbox(label="Accept terms", size="small", error=True),
            FieldGroup(
                Checkbox(label="Option 1"),
                Checkbox(label="Option 2"),
                legend="Choices",
                direction="row"
            ),
            Select(Option("One"), Option("Two"), variant="filled"),
            H2("Data Display Components"),
            Card(
                Hgroup(H3("Card Title")),
                P("This is a card content."),
                variant="outlined"
            ),
            Hr(),
            H2('Acordian'),
            Accordion("Details", P("More info"), variant="text"),
            Hr(),
            H2("Avatar"),
            Avatar(
                Img(src="https://picsum.photos/seed/user1/100", alt="User 1"),
                variant="rounded"
            ),
           AvatarGroup(
                Avatar(Img(src="https://picsum.photos/seed/user1/100", alt="User 1"), variant="rounded"),
                Avatar(Img(src="https://picsum.photos/seed/user2/100", alt="User 2"), variant="rounded"),
                spacing="gap-small"
            ),
            Hr(),
            CustomButton("Custom Button"),
            Switch("Switch Test"),
            Hr(),
            Badge(label="New", color="good", variant="dot"),
            Badge(Button("New"), color="bad", label="5"),
            H2("Feedback Components"),
            Alert("This is an alert!", severity="warning", variant="tonal"),
            Snackbar("Snackbar message", position="bottom-right", visible=True),
            Tabs(tabs, variant="filled", panels=panels),
            
        )
    )
```

``` python
server = JupyUvi(app)
```

<script>
document.body.addEventListener('htmx:configRequest', (event) => {
    if(event.detail.path.includes('://')) return;
    htmx.config.selfRequestsOnly=false;
    event.detail.path = `${location.protocol}//${location.hostname}:8000${event.detail.path}`;
});
</script>

``` python
Tabs(tabs, variant="filled", panels=panels)
```

``` html
<nav class="tabs filled">
  <div role="tablist" aria-label="Filled tabs">
<button role="tab" aria-controls="tab-1-panel" aria-selected="true" tabindex="0" id="tab-1" class="selected" name="tab-1">Korg</button><button role="tab" aria-controls="tab-2-panel" aria-selected="false" tabindex="-1" id="tab-2" name="tab-2">Yamaha</button><button role="tab" aria-controls="tab-3-panel" aria-selected="false" tabindex="-1" id="tab-3" name="tab-3">Roland</button>  </div>
  <div role="tabpanel" aria-labelledby="tab-1" id="tab-1-panel">
    <p>Korg content</p>
  </div>
  <div role="tabpanel" aria-labelledby="tab-2" hidden id="tab-2-panel">
    <p>Yamaha content</p>
  </div>
  <div role="tabpanel" aria-labelledby="tab-3" hidden id="tab-3-panel">
    <p>Roland content</p>
  </div>
</nav>
```

## More scratch work..

``` python
def setup_base_styles():
    return Script("""
        if (!document.getElementById('base-styles')) {
            const style = document.createElement('style');
            style.id = 'base-styles';
            style.textContent = `
                @layer openprops, normalize, utils, theme, components.base, components.has-deps;
            `;
            document.head.prepend(style);
            
            // Load CDN resources once
            const links = [
                {href: 'opbeta/css/media-queries.css', layer: 'openprops'},
                {href: 'opbeta/index.css', layer: 'openprops'},
                // Add other CDN resources...
            ];
            
            links.forEach(({href, layer}) => {
                if (!document.querySelector(`link[href="${href}"]`)) {
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = href;
                    link.setAttribute('layer', layer);
                    document.head.appendChild(link);
                }
            });
        }
    """)
```

``` python
def setup_styles_and_registry():
    return Script("""
        // Initialize our style management system if it doesn't exist
        if (!window.styleSystem) {
            window.styleSystem = {
                registry: new Map(),
                layers: {
                    base: false,
                    cdn: new Set(),
                }
            };
            
            // Setup base layer structure
            const baseStyle = document.createElement('style');
            baseStyle.id = 'base-styles';
            baseStyle.textContent = `
                @layer openprops, normalize, utils, theme, components.base, components.has-deps;
            `;
            document.head.prepend(baseStyle);
            window.styleSystem.layers.base = true;
        }
    """)

def register_component_styles(name, styles, layer='components.base'):
    return Script(f"""
        if (!window.styleSystem.registry.get('{name}')) {{
            window.styleSystem.registry.set('{name}', true);
            document.head.appendChild(Object.assign(
                document.createElement('style'),
                {{
                    id: '{name}-styles',
                    textContent: `@layer {layer} {{ {styles} }}`
                }}
            ));
        }}
    """)
```

### Switch

``` python
def Switch(label, checked=False, disabled=False, size=None, stack=False, error=False, supporting_text=None, **kwargs):
    # Register base styles
    styles = """
        @layer components.base {
  :where(.switch) {
    --_accent-color: var(--primary);
    --_accent-contrast: var(--primary-contrast);

    --_dot-bg-color: light-dark(var(--gray-11), var(--gray-14));
    --_dot-inset: var(--size-1) auto auto var(--size-1);
    --_dot-outline-size: 0;
    --_dot-size: var(--size-3);

    --_track-bg-color: light-dark(var(--gray-3), var(--gray-8));
    --_track-height: var(--size-5);
    --_track-width: var(--size-8);
    --_transition-tf: var(--ease-4);
    --_transition-time: 0.2s;

    align-items: center;
    color: var(--text-color-1);
    display: inline-grid;
    gap: 0 var(--size-2);
    grid-auto-columns: auto;
    grid-auto-flow: column;
    inline-size: fit-content;

    input[type="checkbox"][role="switch"] {
      appearance: none;
      block-size: var(--_track-height);
      cursor: pointer;
      inline-size: var(--_track-width);
      margin: 0;
      position: relative;

      /* Track */
      &::before {
        background-color: var(--_track-bg-color);
        block-size: var(--_track-height);
        border: 1px solid var(--_dot-bg-color);
        border-radius: 100vmax;
        content: "";
        inline-size: var(--_track-width);
        inset: 0;
        position: absolute;
      }

      &:focus-visible {
        outline-offset: 2px;
        outline: 2px solid currentColor;
      }

      /* Dot */
      &::after {
        background-color: var(--_dot-bg-color);
        block-size: var(--_dot-size);
        border-radius: 100vmax;
        border: 1px solid var(--_dot-border-color);
        content: "";
        inline-size: var(--_dot-size);
        inset: var(--_dot-inset);
        outline-offset: -1px;
        outline: var(--_dot-outline-size) solid var(--_dot-bg-color);
        position: absolute;
      }

      /* Checked */
      &:checked {
        &::before {
          background-color: var(--_accent-color);
          border-color: var(--_accent-color);
          transition:
            background-color var(--_transition-time) var(--_transition-tf),
            border-color var(--_transition-time) var(--_transition-tf);
        }

        /* Dot */
        &::after {
          --_dot-bg-color: var(--_accent-contrast);
          --_dot-outline-size: calc(var(--size-1) - 1px);

          inset-inline-start: calc(
            var(--_track-width) - var(--_dot-size) - var(--size-1)
          );
        }
      }

      /* Animation */
      @media (prefers-reduced-motion: no-preference) {
        /* Track */
        &::before {
          transition:
            background-color var(--_transition-time) var(--_transition-tf),
            border-color var(--_transition-time) var(--_transition-tf);
        }

        /* Dot */
        &::after {
          transition: all var(--_transition-time) var(--_transition-tf);
        }

        &:active:after {
          --_dot-outline-size: calc(var(--size-1) + 1px);
        }

        &:checked {
          &:active:after {
            --_dot-outline-size: calc(var(--size-1) + 1px);
          }
        }
      }
    }

    /* Required dot */
    &:has([required]:not(:checked)) {
      .label:after {
        color: var(--red);
        content: "*";
        inset: 0 -0.25ex auto auto;
        position: absolute;
      }
    }

    /* Disabled */
    &:has([disabled]) {
      cursor: not-allowed;
      opacity: 0.64;
      user-select: none;

      input {
        cursor: not-allowed;
      }
    }

    /* Label */
    .label {
      grid-column: 2;
      grid-row: 1;
      min-width: 0;
      padding-inline: 0 1ex;
      position: relative;
      user-select: none;
    }

    /* Supporting text */
    .supporting-text {
      color: var(--text-color-2);
      font-size: var(--font-size-xs);
      grid-column: 2;
      grid-row: 2;
      line-height: 1.5;
      z-index: 1;
    }

    /* Size */
    &.small {
      --_dot-size: 0.75rem;
      --_track-height: var(--size-4);
      --_track-width: 2.5rem;
    }

    /* Stacked layout */
    &.stack {
      justify-items: center;
      grid-auto-columns: unset;

      .label {
        grid-column: 1/-1;
        grid-row: 2;
        margin-block-start: var(--size-1);
        padding-inline: 1ex;
      }

      .supporting-text {
        grid-column: 1/-1;
        grid-row: 3;
      }
    }

    /* Validation */
    &.error {
      input {
        outline: 2px solid var(--color-9);
        border-radius: var(--radius-round);
      }

      .label,
      .supporting-text {
        color: var(--color-9);
      }
    }
  }
}
    """
    
    # Build classes
    classes = ['switch']
    if size == 'small':
        classes.append('small')
    if stack:
        classes.append('stack')
    if error:
        classes.append('error')
    
    return Div(
        register_component_styles('switch', styles, layer='components.base'),
        Label(
            Input(
                type="checkbox",
                role="switch",
                checked=checked,
                disabled=disabled,
                **kwargs
            ),
            Span(label, cls="label") if label else None,
            Span(supporting_text, cls="supporting-text") if supporting_text else None,
            cls=' '.join(classes)
        )
    )
```

``` python
def FieldGroup(legend, *switches, direction='column', disabled=False, error=False, supporting_text=None):
    styles = """
@layer components.has-deps {
  /* Common styling for checkbox, radio and switch groups */
  :where(fieldset.field-group) {
    border: 0;
    border-radius: 0;
    gap: 0;
    padding: 0;
    z-index: 1;

    legend {
      color: var(--text-color-2);
      padding: 0 1ex 0 0;
    }

    /* Disabled */
    &[disabled] {
      cursor: not-allowed;
      opacity: 0.64;
      user-select: none;

      input {
        cursor: not-allowed;
      }
    }

    /* Validation */
    &.error {
      legend,
      .supporting-text {
        color: var(--color-9);
      }
    }

    /* Required */
    &:has([required]) {
      &:not(:has(input:where([type="radio"], [type="checkbox"]):checked)) {
        legend {
          position: relative;

          &::after {
            color: var(--red);
            content: "*";
            inset: 0 -0.25ex auto auto;
            position: absolute;
          }
        }
      }
    }
    :where(.radio, .checkbox, .switch) .label:after {
      display: none;
    }

    /* Supporting text */
    .supporting-text {
      color: var(--text-color-2);
      font-size: var(--font-size-xs);
      line-height: 1.5;
      z-index: 1;
    }

    /* Fields */
    .fields {
      display: flex;
      flex-direction: column;
      gap: var(--size-2);

      * ~ & {
        padding: var(--size-2) 0;
      }
    }

    :last-child {
      padding-block-end: 0;
    }

    /* Directions */
    &.row {
      .fields {
        flex-direction: row;
      }
    }
  }
}
    """
    
    classes = ['field-group']
    if direction == 'row':
        classes.append('row')
    if error:
        classes.append('error')
    
    return Div(
        register_component_styles('field-group', styles, layer='components.has-deps'),
        Fieldset(
            Legend(legend) if legend else None,
            Span(supporting_text, cls="supporting-text") if supporting_text else None,
            Div(*switches, cls="fields"),
            cls=' '.join(classes),
            disabled=disabled
        )
    )
```

``` python
@rt('/test')
def get():
    return Html(
        Head(
            Title("Component Demo"),
            setup_styles_and_registry(),
            setup_base_styles()
        ),
        Body(
            Div(
                H1("Settings Demo"),
                # Switch component will register its own styles
                Switch(
                    "Dark Mode", 
                    supporting_text="Toggle dark mode"
                ),
                # FieldGroup component will register its styles
                FieldGroup(
                    "Notification Preferences",
                    Switch("Email notifications"),
                    Switch("Push notifications", checked=True),
                    Switch("Weekly digest"),
                    direction='row',
                    supporting_text="Choose how you want to be notified"
                )
            )
        )
    )
```

</div>

</div>

</div>

</div>

</div>
